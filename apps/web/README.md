# Web App (Next.js 16)

A prewired Next.js app for building Stellar dapps with:
- TypeScript, Tailwind CSS
- Supabase client (Auth, Storage, Realtime)
- Soroban RPC utilities
- Stellar Wallets Kit integration (with persistence)
- shadcn/ui-style button primitives

## Getting Started

```bash
# from repo root
cd apps/web
cp .env.local.example .env.local
# edit .env.local (see Environment below)

npm run dev
```

## Scripts

```bash
npm run dev      # Start development server
npm run build    # Production build (Turbopack)
npm run start    # Start production server
npm run lint     # ESLint
```

## Environment

Set these in `apps/web/.env.local`:

```env
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
NEXT_PUBLIC_STELLAR_NETWORK=testnet
NEXT_PUBLIC_STELLAR_HORIZON_URL=https://horizon-testnet.stellar.org
NEXT_PUBLIC_STELLAR_SOROBAN_RPC_URL=https://soroban-testnet.stellar.org
NEXT_PUBLIC_APP_NAME=Stellar App
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=

# Contract bindings (generated by Stellar CLI)
HELLO_WORLD_BINDING=packages/hello_world
NEXT_PUBLIC_INCREMENT_BINDING=packages/increment
```

## Contract Bindings (Hello World & Increment)

This app dynamically imports TypeScript bindings generated by the Stellar CLI.

- Guide: `CONTRACTS_GUIDE.md`
- Generate bindings and build them into `packages/<alias>`
- Point the app to the package via env vars above

The API route `/api/hello-world` loads `HELLO_WORLD_BINDING`. The `useIncrement` hook loads `NEXT_PUBLIC_INCREMENT_BINDING` and demonstrates a write flow with wallet signing.

## Wallets

The wallet provider (`contexts/WalletsKitContext.tsx`):
- Persists selected wallet and address in `localStorage`
- Auto-reconnects on reload
- Guards SSR usage (`typeof window` checks)

Use the `WalletMenu` from the navbar to connect, view balance, and disconnect.

## UI

- Sticky, blurred navbar with gradient brand text
- Hero section and glass-like onboarding card
- Buttons via `components/ui/button.tsx`

You can remove the onboarding card from `app/page.tsx` once you plug in your own components.
